# Secure-API-With-API-Token-in-Laravel-Lumen

If you want to secure API from the unauthorized user using Laravel Lumen framework then this article is for you. We all know that API passes the records from the database to the system. If the records are sensitive and important and donâ€™t want to share with third-party then we have to secure that record from third-party.

Laravel has many authentication methods such as API Token, Basic Authentication, and OAuth2

API Token is a predefined token generated by the user. Generated token takes place in the header of an HTTP request. If a request has an API token and the token is valid then the API return response otherwise returns an error.

Implementing API Token authentication then follow the below process.

# 1:

### Php artisan make:middleware Authenticate

Once the Authenticate middleware is created then go the file and write the code inside Handle function as you can see I have written it for my API.

  public function handle($request, Closure $next, $guard = null)

   {

   $token = $request->header('API-TOKEN');

       if ('test-token' != $token) {      

           abort(401,'Invalid api token.');

       }

       return $next($request);

   }

'test-token' is a user-generated token value, you can write anything or whatever you want to be your API token.

header('API-TOKEN') is a header with the key 'API-TOKEN'.

![Image1](https://i.imgur.com/T7qJ8QR.png "Title")

You can see in the above snap, how to put the header in your request.



# 2:
Go to the boostrap directory and open the app.php file.

Uncomment the below lines If the code already exists otherwise write the below code.

$app->middleware([

   App\Http\Middleware\Authenticate::class

]);
